# -------------- Custom MySQL / Percona config  -----------------------------------
#      By Christopher Gray
#      christophermjgray@gmail.com
#      10/13/2016
#      Version 2.0.5
# ---------------------------------------------------------------------------------------------------

[client]
port            = 3306
socket          = /var/run/mysqld/mysqld.sock

[mysqld_safe]
socket          = /var/run/mysqld/mysqld.sock
nice            = 0
log_error 		= /var/log/mysql/mysql_error.log

[mysqld]
user            = mysql
pid-file        = /var/run/mysqld/mysqld.pid
socket          = /var/run/mysqld/mysqld.sock
port            = 3306
basedir         = /usr
datadir         = /var/lib/mysql
tmpdir          = /tmp
lc-messages-dir = /usr/share/mysql
skip-external-locking

#bind-address           = 127.0.0.1

# * Fine Tuning
innodb_buffer_pool_size = 2G
key_buffer              = 16M
max_allowed_packet      = 64M
thread_stack            = 192K
thread_cache_size       = 8
myisam-recover          = BACKUP
max_connections         = 2048
#table_cache            = 64
thread_concurrency      = 10

# --- Query Cache Configuration ----
query_cache_limit       = 32M
query_cache_size        = 128M

# ----- Logging and Replication ------
log_error	= /var/log/mysql/mysql_error.log

# Be aware that this log type is a performance killer.
#general_log_file        = /var/log/mysql/mysql.log
#general_log_file        = /var/log/mysql/general.log
#general_log             = 1

# Error logging goes to syslog due to /etc/mysql/conf.d/mysqld_safe_syslog.cnf.
# Here you can see queries with especially long duration
#log_slow_queries       = /var/log/mysql/mysql-slow.log
#log_slow_queries       = /var/log/mysql/slow.log
#long_query_time = 2
#log-queries-not-using-indexes

#------- Replication -------------
server-id  				= 2
#relay-log              = /var/log/mysql/replication/slave-relay.log
#relay-log-index        = /var/log/mysql/replication/slave-relay-log.index
#log_bin                = /var/log/mysql/replication/mysql-bin.log
expire_logs_days        = 3
max_binlog_size         = 256M
#binlog_do_db           = main_db
#binlog_ignore_db       = include_database_name

# --- Security Features ----
# For generating SSL certificates I recommend the OpenSSL GUI "tinyca"
# ssl-ca=/etc/mysql/cacert.pem
# ssl-cert=/etc/mysql/server-cert.pem
# ssl-key=/etc/mysql/server-key.pem

[mysqldump]
quick
quote-names
max_allowed_packet      = 64M
[mysql]
#no-auto-rehash # faster start of mysql but no tab completion

[isamchk]
key_buffer              = 16M

# * IMPORTANT: Additional settings that can override those from this file!
#   The files must end with '.cnf', otherwise they'll be ignored.
!includedir /etc/mysql/conf.d/
#!includedir /etc/mysql/mysql.conf.d/